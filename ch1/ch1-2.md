# Ch1 构造过程抽象

[TOC]

## 1.2 过程与它们所产生的计算

### 1.9

对于前者的线性递归过程：

```scheme
(+ 4 5)
(inc (+ 3 5))
(inc (inc (+ 2 5)))
(inc (inc (inc (+ 1 5))))
(inc (inc (inc (inc (+ 0 5)))))
(inc (inc (inc (inc 5))))

; ... 省略几步

(inc 8)

9
```

可以看到运算过程中的信息部分是被解释器维持着（即 inc 的数量）。

对于后者的线性迭代过程：

```scheme
(+ 4 5)
(+ 3 6)
(+ 2 7)
(+ 1 8)
(+ 0 9)

9
```

运行过程的全部信息都储存在 a 和 b 两个变量当中。

### 1.10

对于这三个表达式，我们需要将其递归展开：

```scheme
(A 1 10)
(A 0 (A 1 9))
(A 0 (A 0 (A 1 8)))
(A 0 (A 0 (A 0 (A 1 7))))

; ... 省略

(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 1)))))))))

(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 2))))))))
(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 4)))))))

; ... 省略

1024
```

所以第一个式子的含义实际上是 2 的 10 次方。

```scheme
(A 2 4)
(A 1 (A 2 3))
(A 1 (A 1 (A 2 2)))
(A 1 (A 1 (A 1 (A 2 1))))
(A 1 (A 1 (A 1 2))) 
(A 1 (A 1 4))
(A 1 16) ; 用上面的结论 

65536
```

```scheme
(A 3 3)
(A 2 (A 3 2))
(A 2 (A 2 (A 3 1)))
(A 2 (A 2 2)) 
(A 2 (A 1 (A 2 1)))
(A 2 (A 1 2))
(A 2 (A 0 (A 1 1)))
(A 2 (A 0 2))
(A 2 4) ; 用上面的结论

65536 
```

不难看出：

1. `(define (f n) (A 0 n))` 等价于 $2n$
1. `(define (g n) (A 1 n))` 等价于 $2^n$
1. `(define (h n) (A 2 n))` 这个比较难以一眼看出，我们展开 (A 2 5) 试试

```scheme
(A 2 5)
(A 1 (A 2 4))
(A 1 65536) 
```

可以看到，就是 $2^{(A\ 2\ 4)}$。归纳一下，就是 $2^{2^{2^{2^{...}}}}$，$n$ 为多少就是计算所少次幂。

给自己增加点难度，`(define (l n) (A 3 n)` 对应的数学定义是什么？我们展开 (A 3 4) 试试

```scheme
(A 3 4)
(A 2 (A 3 3))
(A 2 65536)
```

2 上面是 65536 个 2...。可以看出是一个疯狂的套娃，不太好写出通项公式了，实际上，wiki 百科上对于这种情况也是使用了递推公式来表示的，那我们就不为难自己了。

### 1.12

这里我们把原问题化简为，计算 m 行第 n 个数的值，那么就有这样的递归关系：

$$
F(m,n) = 
\begin{cases}
1, & n=1 \ or\ n=m  \\
F(m-1,n-1) + F(m-1,n), & else
\end{cases}
$$

不难看出，使用递归计算帕斯卡三角形，效率是非常低的。

### 1.13

### 1.14

### 1.15

a) 调用 p 的时候, 一定同时发生将 angle 除以 3 的操作, 所以来看 12.15 除以多少个 3 以后, 其值会小于等于 0.1:

$$12.15 \Rightarrow 4.05 \Rightarrow 1.35 \Rightarrow 0.45 \Rightarrow 0.15 \Rightarrow 0.05$$

一共除了 5 次 3, `p` 共计调用了 5 次.

b) 递归的步数取决于计算多少次除法之后 a 能够小于等于 0.1, 假设为 n, 则有

$$ \frac{a}{3^{n}} <= 0.1 \ and \\ \frac{a}{3^{n-1}} > 0.1 $$

化简之后有

$$ log_310a \leq n < 1 + log_310a  $$

所以步数增长的阶为 $\Theta(log_3a)$.

空间的阶同理可得为 $\Theta(log_3a)$. 

### 1.16

[code](./1.16.scm)

### 1.17 1.18

这两道题本质上不是一样的吗? 这里我就写在一起了.

[code](./1.17.scm)


### 1.19

这里令

$$
\begin{array} {lcl}
a' & = & bq + aq + ap \\
b' & = & bp + aq \\

a'' & = & b'q + a'q + a'p \\
b'' & = & b'p + a'q \\
\end{array}
$$

将前两个公式带入后两个, 化简:

$$
\begin{array} {lcl}
a''& = & b(2pq+q^2)+a(q^2+2pq)+a(p^2+q^2)\\
b''& = & b(p^2+q^2)+a(2pq+q^2)
\end{array}
$$


令:

$$
\begin{array} {lcl}
p' & = & p^2 + q^2 \\
q' & = & 2pq + q^2
\end{array}
$$

可以得到原来的形式:

$$
\begin{array} {lcl}
a'' = bq' + aq' + ap' \\
b'' = bp' + aq'
\end{array}
$$

[code](./1.19.scm)

---

2022 Hullis <wendellhu95@gmail.com>